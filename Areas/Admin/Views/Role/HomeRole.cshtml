@model IEnumerable<WareHouse.Models.Role>
@{
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
}
<link rel="stylesheet" href="~/css/AddCategory.css" />

<div class="container-fluid">
    <div class="card">
        <br>
            <p class="h3"style="text-align:center;margin-top: 5px;color:red" >QUẢN LÝ CHỨC DANH</p>
        <br>
        <div class="row">
            <div class="col-md-12" style="margin-left: 20px">
                <button type="button" class="btn btn-success" id="ShowAddDialog">Thêm mới</button>
            </div>    
            <div class="col-md-12" style="margin-top:20px">
                <table class="table">
                <thead>
                    <tr>
                        <th scope="col" style="text-align: center;">STT</th>
                        <th scope="col">Tên chức danh</th>
                        <th scope="col">Lương</th>
                        <th scope="col" colspan="2" >Thao tác</th> 
                    </tr>
                </thead>
                <tbody>
                        @foreach(var (roles, index) in Model.Select((item, index) => (item, index + 1))){
                            <tr>
                                <td style="text-align: center;">@index</td>
                                <td>@roles.Name</td>
                                <td>@roles.Salary.ToString("N0") VNĐ</td>
                                <td colspan="2">
                                    <a role="button" class="btn btn-primary" href = "@Url.Action("EditRole", "Role", new { area = "Admin",id = @roles.IdRole })">Sửa</a>
                                    <a role="button" class="btn btn-danger"  href = "javascript:del_confirm('@Url.Action("DeleteRole", "Role", new { area = "Admin",id = @roles.IdRole})','@roles.Name')">Xóa </a>
                                </td>
                            </tr>
                        }
                </tbody>
            </table>
            </div>
        </div>

    </div>
</div>

<dialog id="AddRole" class="AddDialog-Modal">
    <form method="post" action="/Admin/Role/Add">
        <div class="dialog-content">
            <div class="modal-header">
                <h5 class="modal-title">Thêm mới chức danh</h5>
                <button type="button" class="btn-close" id="CloseIcon" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="NameCategory" class="form-label">Tên chức danh:</label>
                    <input type="text" class="form-control" id="Name"  name="Name" required>
                </div>
                <div class="form-group">
                    <label for="Description" class="form-label">Lương</label>
                    <input type="number" class="form-control" id="Salary"  name="Salary" required/>
                </div>
            </div>
            <div class="dialog-buttons">
                <button type="submit" class="submit-btn">Thêm</button>
            </div>
        </div>
    </form>
</dialog>

<script>
    function del_confirm(strlink,NameCategory){
        ok = confirm("Bạn có muốn xóa chức danh '" + NameCategory + "' không ?");
        if (ok != 0){
            window.location.href = strlink;
        }
    }
</script>


<script>
    document.addEventListener("DOMContentLoaded", function () {
        const addCategoryDialog = document.getElementById("AddRole");
        const showAddDialogButton = document.getElementById("ShowAddDialog");
        const CloseIconButton = document.getElementById("CloseIcon");

        showAddDialogButton.addEventListener("click", function () {
            addCategoryDialog.showModal();
        });
        addCategoryDialog.addEventListener("click", function (event) {
            if (event.target === addCategoryDialog) {
                addCategoryDialog.close();
            }
        });
        CloseIconButton.addEventListener("click", function () {
            addCategoryDialog.close();
        });
    });
</script>