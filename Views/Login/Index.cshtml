@{
    ViewData["Title"] = "Đăng nhập";
}

<div class="container" style="max-width: 420px; margin-top: 60px;">
    <div class="card shadow p-4">
        <h3 class="text-center mb-4">Đăng nhập hệ thống</h3>
        <form asp-action="Index" method="post" id="loginForm">
            <div class="form-group mb-3">
                <label class="mb-2">Chọn loại đăng nhập:</label><br />
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="loginType" id="userRadio" value="user" checked>
                    <label class="form-check-label" for="userRadio">Nhân viên/Quản trị</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="loginType" id="supplierRadio" value="supplier">
                    <label class="form-check-label" for="supplierRadio">Nhà cung cấp</label>
                </div>
            </div>
            <div id="userFields">
                <div class="form-group mb-3">
                    <label for="email">Email</label>
                    <input type="email" class="form-control" id="email" name="email" placeholder="Nhập email" required />
                </div>
                <div class="form-group mb-3">
                    <label for="password">Mật khẩu</label>
                    <input type="password" class="form-control" id="password" name="password" placeholder="Nhập mật khẩu" required />
                </div>
            </div>
            <div id="supplierFields" style="display:none;">
                <div class="form-group mb-3">
                    <label for="account">Tài khoản</label>
                    <input type="text" class="form-control" id="account" name="account" placeholder="Nhập tài khoản" />
                </div>
                <div class="form-group mb-3">
                    <label for="supplierPassword">Mật khẩu</label>
                    <input type="password" class="form-control" id="supplierPassword" name="supplierPassword" placeholder="Nhập mật khẩu" />
                </div>
            </div>
            <button type="submit" class="btn btn-primary w-100 mt-2">Đăng nhập</button>
            <div class="text-center mt-2">
                <a href="@Url.Action("ForgotPassword", "Login")">Quên mật khẩu?</a>
            </div>
        </form>
        @if (ViewBag.Error != null)
        {
            <div class="alert alert-danger mt-3">@ViewBag.Error</div>
        }
    </div>
</div>

<script>
    const userRadio = document.getElementById('userRadio');
    const supplierRadio = document.getElementById('supplierRadio');
    const userFields = document.getElementById('userFields');
    const supplierFields = document.getElementById('supplierFields');
    userRadio.addEventListener('change', function() {
        if (userRadio.checked) {
            userFields.style.display = '';
            supplierFields.style.display = 'none';
            document.getElementById('email').required = true;
            document.getElementById('password').required = true;
            document.getElementById('account').required = false;
            document.getElementById('supplierPassword').required = false;
        }
    });
    supplierRadio.addEventListener('change', function() {
        if (supplierRadio.checked) {
            userFields.style.display = 'none';
            supplierFields.style.display = '';
            document.getElementById('email').required = false;
            document.getElementById('password').required = false;
            document.getElementById('account').required = true;
            document.getElementById('supplierPassword').required = true;
        }
    });
</script>
